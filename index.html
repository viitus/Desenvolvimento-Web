<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Atividades</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table, th, td {
            border: 1px solid #000;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        button {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>
    <h1>Sistema de Gerenciamento de Atividades</h1>
    <form id="activityForm">
        <label for="categoria">Categoria da atividade:</label><br>
        <select id="categoria" required>
            <option value="" disabled selected>Selecione uma categoria</option>
            <option value="Extensão">Extensão</option>
            <option value="Ensino">Ensino</option>
            <option value="Pesquisa">Pesquisa</option>
        </select><br><br>

        <label for="descricao">Descrição da atividade:</label><br>
        <select id="descricao" required disabled>
            <option value="" disabled selected>Selecione uma categoria primeiro</option>
        </select><br><br>

        <label for="horasTotais">Total de horas da atividade:</label><br>
        <input type="number" id="horasTotais" min="1" required><br><br>

        <button type="submit">Adicionar Atividade</button>
    </form>

    <h2>Tabela de Atividades</h2>
    <table id="resultTable">
        <thead>
            <tr>
                <th>Categoria</th>
                <th>Atividade</th>
                <th>Aproveitamento</th>
                <th>Limite de Horas</th>
                <th>Horas Inseridas</th>
                <th>Horas Rendidas</th>
                <th>Opções</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Total de Horas por Categoria</h2>
    <table id="summaryTable">
        <thead>
            <tr>
                <th>Categoria</th>
                <th>Total de Horas</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Extensão</td>
                <td id="extensaoTotal">0</td>
            </tr>
            <tr>
                <td>Ensino</td>
                <td id="ensinoTotal">0</td>
            </tr>
            <tr>
                <td>Pesquisa</td>
                <td id="pesquisaTotal">0</td>
            </tr>
            <tr>
                <td><strong>Total Geral</strong></td>
                <td id="totalGeral">0</td>
            </tr>
        </tbody>
    </table>

    <script>
        const atividadesPorCategoria = {
            "Extensão": [
                "Projeto de extensão",
                "Atividades culturais",
                "Visitas Técnicas",
                "Visitas a Feiras e Exposições",
                "Cursos de Idiomas",
                "Palestras, Seminários e Congressos Extensionistas (ouvinte)",
                "Palestras, Seminários e Congressos Extensionistas (apresentador)",
                "Projeto Empresa Júnior"
            ],
            "Ensino": [
                "Monitoria",
                "Concursos e campeonatos de atividades acadêmicas",
                "Presença comprovada a defesas de TCC do curso de Engenharia de Computação",
                "Cursos Profissionalizantes Específicos na área",
                "Cursos Profissionalizantes em geral",
                "Estágio Extracurricular"
            ],
            "Pesquisa": [
                "Iniciação Científica",
                "Publicação de artigos em periódicos científicos",
                "Publicação de artigos completos em anais de congressos",
                "Publicação de capítulo de livro",
                "Publicação de resumos de artigos em anais",
                "Registro de patentes como auto/coautor",
                "Premiação resultante de pesquisa científica",
                "Colaborador em atividades como Seminários e Congressos",
                "Palestras, Seminários e Congressos de Pesquisa (ouvinte)",
                "Palestras, Seminários e Congressos de Pesquisa (apresentador)"
            ]
        };

        const categoriaLimite = { "Extensão": 90, "Ensino": 90, "Pesquisa": 90 };
        const categoriaHoras = { "Extensão": 0, "Ensino": 0, "Pesquisa": 0 };

        const aproveitamentoPorTipo = {
            "Projeto de extensão": 0.10,
            "Atividades culturais": 0.80,
            "Visitas Técnicas": 1.00,
            "Visitas a Feiras e Exposições": 0.20,
            "Cursos de Idiomas": 0.60,
            "Palestras, Seminários e Congressos Extensionistas (ouvinte)": 0.80,
            "Palestras, Seminários e Congressos Extensionistas (apresentador)": 1.00,
            "Projeto Empresa Júnior": 0.20,
            "Monitoria": 0.70,
            "Concursos e campeonatos de atividades acadêmicas": 0.70,
            "Presença comprovada a defesas de TCC do curso de Engenharia de Computação": 0.50,
            "Cursos Profissionalizantes Específicos na área": 0.80,
            "Cursos Profissionalizantes em geral": 0.20,
            "Estágio Extracurricular": 0.70,
            "Iniciação Científica": 0.80,
            "Publicação de artigos em periódicos científicos": 1.00,
            "Publicação de artigos completos em anais de congressos": 1.00,
            "Publicação de capítulo de livro": 1.00,
            "Publicação de resumos de artigos em anais": 1.00,
            "Registro de patentes como auto/coautor": 1.00,
            "Premiação resultante de pesquisa científica": 1.00,
            "Colaborador em atividades como Seminários e Congressos": 1.00,
            "Palestras, Seminários e Congressos de Pesquisa (ouvinte)": 0.80,
            "Palestras, Seminários e Congressos de Pesquisa (apresentador)": 1.00,
        };

        // Limites de horas por atividade
        const limitesPorAtividade = {
            "Projeto de extensão": 50,
            "Atividades culturais": 30,
            "Visitas Técnicas": 20,
            "Visitas a Feiras e Exposições": 15,
            "Cursos de Idiomas": 30,
            "Palestras, Seminários e Congressos Extensionistas (ouvinte)": 25,
            "Palestras, Seminários e Congressos Extensionistas (apresentador)": 50,
            "Projeto Empresa Júnior": 50,
            "Monitoria": 60,
            "Concursos e campeonatos de atividades acadêmicas": 40,
            "Presença comprovada a defesas de TCC do curso de Engenharia de Computação": 20,
            "Cursos Profissionalizantes Específicos na área": 40,
            "Cursos Profissionalizantes em geral": 50,
            "Estágio Extracurricular": 80,
            "Iniciação Científica": 50,
            "Publicação de artigos em periódicos científicos": 60,
            "Publicação de artigos completos em anais de congressos": 60,
            "Publicação de capítulo de livro": 60,
            "Publicação de resumos de artigos em anais": 50,
            "Registro de patentes como auto/coautor": 70,
            "Premiação resultante de pesquisa científica": 30,
            "Colaborador em atividades como Seminários e Congressos": 40,
            "Palestras, Seminários e Congressos de Pesquisa (ouvinte)": 30,
            "Palestras, Seminários e Congressos de Pesquisa (apresentador)": 50,
        };

        const categoriaSelect = document.getElementById("categoria");
        const descricaoSelect = document.getElementById("descricao");

        categoriaSelect.addEventListener("change", () => {
            const categoria = categoriaSelect.value;
            descricaoSelect.innerHTML = '<option value="" disabled selected>Selecione uma atividade</option>';

            if (atividadesPorCategoria[categoria]) {
                atividadesPorCategoria[categoria].forEach(atividade => {
                    const option = document.createElement("option");
                    option.value = atividade;
                    option.textContent = atividade;
                    descricaoSelect.appendChild(option);
                });
                descricaoSelect.disabled = false;
            } else {
                descricaoSelect.disabled = true;
            }
        });

        document.getElementById("activityForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const descricao = descricaoSelect.value;
            const categoria = categoriaSelect.value;
            const horasTotais = parseInt(document.getElementById("horasTotais").value);

            const aproveitamento = aproveitamentoPorTipo[descricao] || 1;
            const horasRendidas = horasTotais * aproveitamento;
            const limiteHoras = limitesPorAtividade[descricao];
            const horasAproveitadasFinal = Math.min(horasRendidas, limiteHoras);

            categoriaHoras[categoria] += horasAproveitadasFinal;

            // Atualizar tabela de atividades
            const tableBody = document.querySelector("#resultTable tbody");
            const row = document.createElement("tr");

            row.innerHTML = `
                <td>${categoria}</td>
                <td>${descricao}</td>
                <td>${(aproveitamento * 100).toFixed(2)}%</td>
                <td>${limiteHoras}</td>
                <td>${horasTotais}</td>
                <td>${horasAproveitadasFinal.toFixed(2)}</td>
                <td><button class="delete-btn">Apagar</button></td>
            `;

            tableBody.appendChild(row);
            document.getElementById("activityForm").reset();
            descricaoSelect.disabled = true;

            // Atualizar total de horas por categoria
            atualizarResumoHoras();

            // Função de apagar linha
            row.querySelector(".delete-btn").addEventListener("click", () => {
                categoriaHoras[categoria] -= horasAproveitadasFinal;
                row.remove();
                atualizarResumoHoras();
            });
        });

        function atualizarResumoHoras() {
            // Atualiza os totais por categoria
            document.getElementById("extensaoTotal").textContent = categoriaHoras["Extensão"].toFixed(2);
            document.getElementById("ensinoTotal").textContent = categoriaHoras["Ensino"].toFixed(2);
            document.getElementById("pesquisaTotal").textContent = categoriaHoras["Pesquisa"].toFixed(2);

            // Atualiza o total geral
            const totalGeral = categoriaHoras["Extensão"] + categoriaHoras["Ensino"] + categoriaHoras["Pesquisa"];
            document.getElementById("totalGeral").textContent = totalGeral.toFixed(2);
        }
    </script>
</body>
</html>
